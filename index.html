<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Series - Temporal Graph Visualization</title>
    <link rel="stylesheet" href="css/style.css?v=20250519">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- D3.js v7 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Dark Series - Temporal Graph Visualization</h1>
            <div class="controls">
                <button id="reset-zoom">Reset View</button>
                <button id="reset-nodes">Reset Nodes</button>
                <button id="auto-adjust-edges">Auto Adjust Edges</button>
                <button id="save-json">Save JSON</button>
                <button id="load-json">Load JSON</button>
                <div class="download-buttons">
                    <button onclick="saveSvg()">Download SVG</button>
                    <button onclick="savePng(window.layout, window.LayoutLogic)">Save PNG</button>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-symbol regular-event"></div>
                        <span>Regular Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol important-event"></div>
                        <span>Important Trigger Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol death-event"></div>
                        <span>Death Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol romantic-event"></div>
                        <span>Romantic Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol missing-event"></div>
                        <span>Missing Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol timetravel-event"></div>
                        <span>Time Travel Event</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol edge-line"></div>
                        <span>Direct Connection</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol summarized-edge"></div>
                        <span>Summarized Connection</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol time-travel-past-edge-legend"></div>
                        <span>Time Travel to Past</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol time-travel-future-edge-legend"></div>
                        <span>Time Travel to Future</span>
                    </div>
                </div>
            </div>
        </header>
        <div id="visualization-container">
            <svg id="graph"></svg>
        </div>
        <div id="tooltip" class="tooltip">
            <div class="tooltip-header">
                <span id="tooltip-id"></span>
                <span id="tooltip-date"></span>
            </div>
            <div id="tooltip-description"></div>
            <div id="tooltip-characters"></div>
            <div id="tooltip-world"></div>
        </div>
    </div>

    <!-- Scripts (with cache-busting parameters) -->
    <script src="js/data_parser.js?v=20250519"></script>
    <script src="js/layout_logic.js?v=20250519"></script>
    <script src="js/legend.js?v=20250519"></script>
    <script src="js/visualisation.js?v=20250519"></script>
    <script src="js/main.js?v=20250519"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/canvg/3.0.7/umd.min.js"></script>
</body>
</html>